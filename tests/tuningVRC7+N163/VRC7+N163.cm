//@00
var1 vrc7note,vrc7oct,n163note;

//@8000
_init_(A){//max 0x69//max 0x76
	Y=A;
	if ((A&=0x0f)>=0x0c) return;
	vrc7.fm1oct=0x00;	//key-off
	vrc7.fm1vol=0x03;	//set vol 0x3(-9dB)
	for (X=0x7f;X>=0;--X){
		n163.X=fxinitdata[X];
	}
	for (X=7;X>=0;--X){
		vrc7.X=fminitdata[X];
	}
	A=Y;
	if ((A&=0x0f)>=0x07){
		A=Y+0x09;
	}else{
		A=Y+0x05;
	}
	X=A;
	vrc7note=A<<4|0x0c;
	A=X;
	vrc7oct=A>>3&0x0e|0x10;
	A=Y;
	if ((A&=0x0f)>=0x0a){
		A+=0x06;
	}else{
		A+=0x02;
	}
	X=A;
	n163note=A<<1&0xe0
	n163note|=X&0x0f;
	X=vrc7note;
	vrc7.fm1freq=fxhifreq[X];
	vrc7.fm1oct=vrc7oct;
	X=n163note|0x10;
	n163.fx3hifreq=0xe4;	//reset phase
	n163.fx3hifreq=fxhifreq[X];
	n163.fx3midfreq=fxmidfreq[X];
	n163.fx3lofreq=fxlofreq[X];
	ifcs (A=n163note+0x20) return;
	X=A;
	n163.fx2hifreq=0xe4;	//reset phase
	n163.fx2hifreq=fxhifreq[X];
	n163.fx2midfreq=fxmidfreq[X];
	n163.fx2lofreq=fxlofreq[X];
}

const1 fminitdata[]={
	$01 $21 $3F $00 $00 $F0 $00 $0F	;sin
};
const1 fxinitdata[]={
	$10 $32 $54 $76 $98 $BA $DC $FE	;tri
	$EF $CD $AB $89 $67 $45 $23 $01
	$CC $CC $CC $CC $CC $CC $CC $CC	;rec parts
	$00 $00 $00 $00 $00 $00 $00 $00	;rec parts
	$A8 $CB $ED $FF	$FF $DE $BC $8A	;custom1(sin)
	$57 $34 $12 $00 $00 $21 $43 $75
	$C9 $FE $EF $9C	$36 $01 $10 $63	;custom2(sin+oct)
	$00 $00 $00 $00 $00 $00 $00 $00
	$00 $00 $00 $00 $E0 $00 $00 $7C
	$00 $00 $00 $00 $E0 $00 $40 $7C	;vol 0xc(-3dB)
	$00 $00 $00 $00 $E0 $00 $60 $7C	;vol 0xc(-3dB)
	$00 $00 $00 $00 $E0 $00 $00 $7C
	$00 $00 $00 $00 $E0 $00 $00 $7C
	$00 $00 $00 $00 $E0 $00 $00 $7C
	$00 $00 $00 $00 $E0 $00 $00 $7C
	$00 $00 $00 $00 $E0 $00 $00 $7C
};
const1 fxhifreq[]={
	$E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 #129 $00 $00 $00
	$F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 #137 $00 $00 $00
	$E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 #145 $00 $00 $00
	$F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 #154 $00 $00 $00
	$E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 #163 $00 $00 $00
	$F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 #172 $00 $00 $00
	$E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 #183 $00 $00 $00
	$F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 #194 $00 $00 $00
	$E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 #205 $00 $00 $00
	$F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 #217 $00 $00 $00
	$E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 $E0 #230 $00 $00 $00
	$F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0 #244 $00 $00 $00
	$E1 $E1 $E1 $E1 $E1 $E1 $E1 $E1 $E1 $E1 $E1 $E1 #000 $00 $00 $00
	$F1 $F1 $F1 $F1 $F1 $F1 $F1 $F1 $F1 $F1 $F1 $F1 #000 $00 $00 $00
	$E2 $E2 $E2 $E2 $E2 $E2 $E2 $E2 $E3 $E3 $E3 $E3 #000 $00 $00 $00
	$F2 $F2 $F2 $F2 $F2 $F2 $F2 $F2 $F3 $F3 $F3 $F3 #000 $00 $00 $00
};
const1 fxmidfreq[]={
	$03 $04 $04 $04 $04 $05 $05 $05 $06 $06 $07 $07 $00 $00 $00 $00
	$04 $04 $04 $04 $05 $05 $05 $06 $06 $06 $07 $07 $00 $00 $00 $00
	$08 $08 $08 $09 $0A $0A $0B $0C $0C $0D $0E $0F $00 $00 $00 $00
	$08 $08 $08 $09 $0A $0A $0B $0B $0C $0D $0E $0F $00 $00 $00 $00
	$10 $11 $11 $13 $14 $15 $16 $17 $19 $1A $1C $1E $00 $00 $00 $00
	$10 $11 $11 $13 $14 $15 $16 $17 $19 $1A $1C $1E $00 $00 $00 $00
	$20 $22 $23 $26 $28 $2A $2D $2F $32 $35 $39 $3C $00 $00 $00 $00
	$20 $21 $23 $26 $28 $2A $2D $2F $32 $35 $39 $3C $00 $00 $00 $00
	$40 $43 $47 $4C $50 $55 $5A $5F $65 $6B $72 $78 $00 $00 $00 $00
	$40 $43 $47 $4C $50 $55 $5A $5F $65 $6B $72 $78 $00 $00 $00 $00
	$80 $87 $8F $98 $A1 $AA $B4 $BF $CB $D7 $E4 $F1 $00 $00 $00 $00
	$80 $87 $8F $98 $A1 $AA $B4 $BF $CB $D7 $E4 $F1 $00 $00 $00 $00
	$00 $0F $1E $31 $43 $55 $69 $7F $96 $AE $C8 $E3 $00 $00 $00 $00
	$00 $0F $1E $31 $43 $55 $69 $7F $96 $AD $C8 $E3 $00 $00 $00 $00
	$01 $1F $3D $62 $86 $AB $D3 $FE $2D $5B $91 $C6 $00 $00 $00 $00
	$01 $1F $3D $61 $86 $AB $D3 $FE $2D $5C $91 $C6 $00 $00 $00 $00
};
const1 fxlofreq[]={
	$F9 $28 $6F $B6 $FD $44 $A3 $EA $60 $A7 $1D $7C $00 $00 $00 $00
	$05 $34 $7B $C2 $09 $50 $A3 $02 $60 $B3 $1D $88 $00 $00 $00 $00
	$0A $68 $F6 $84 $12 $A0 $46 $04 $C0 $66 $3A $10 $00 $00 $00 $00
	$0A $80 $F6 $84 $1E $AC $52 $F7 $B4 $72 $47 $1B $00 $00 $00 $00
	$14 $00 $EC $08 $3C $58 $A4 $EE $68 $E4 $8E $36 $00 $00 $00 $00
	$08 $00 $ED $15 $30 $58 $98 $FA $69 $E3 $8D $37 $00 $00 $00 $00
	$10 $00 $DA $2A $60 $B0 $30 $F4 $D2 $C6 $1A $6E $00 $00 $00 $00
	$10 $F5 $DA $1D $6D $B0 $3B $E9 $D2 $BB $1A $6E $00 $00 $00 $00
	$20 $EA $B4 $3A $DA $60 $76 $D2 $A4 $76 $34 $DC $00 $00 $00 $00
	$2C $EA $A8 $3B $DA $6C $6A $D2 $B0 $82 $29 $D0 $00 $00 $00 $00
	$58 $D4 $50 $76 $B4 $D8 $D4 $A4 $60 $04 $52 $A0 $00 $00 $00 $00
	$58 $D4 $50 $82 $A7 $D9 $D4 $AF $54 $04 $52 $AC $00 $00 $00 $00
	$B0 $A8 $A0 $04 $4E $B2 $A8 $5E $A8 $08 $A4 $58 $00 $00 $00 $00
	$B0 $A8 $AC $03 $5B $A6 $A7 $52 $A7 $FC $B0 $58 $00 $00 $00 $00
	$60 $50 $58 $06 $B6 $4C $4E $A4 $4E $F8 $60 $B0 $00 $00 $00 $00
	$54 $50 $58 $FB $A9 $58 $5B $B0 $5A $03 $54 $B0 $00 $00 $00 $00
};
